<!doctype html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
</head>

<body>
      <script>
          /*ДЗ 17. Сумма зарплат

          Дізнатись суму всіх зарплат користувачів:

          let nestedObj = {
            sales: [{name: 'John', salary: 1000}, {fname: 'Alice', salary: 600 }],
            development: {
                web: [{name: 'Peter', salary: 2000}, {name: 'Alex', salary: 1800}],
                internals: [{name: 'Jack', salary: 1300}],
            }
        };

        Об'єкт може містити невідому кількість департаментів та співробітників
        */
          function isNested(obj) {
              let result = 0;

              for (let key in obj) {
                  if (typeof obj[key] === 'object') {// Перевіряємо, чи значення властивості є об'єктом
                      if (Array.isArray(obj[key])) {// Перевіряємо, чи значення є масивом
                          for (let value of obj[key]) {
                              if (value && typeof value === 'object' && !isNaN(value.salary) && 'salary' in value) {   // Перевіряємо, чи елемент є об'єктом, має властивість "salary" та її значення не є NaN
                                  result += value.salary;
                              } else {
                                  // Викликаємо функцію logError, якщо знайдено неправильне значення
                                  logError(value.salary, 'salary');
                              }
                          }
                      } else {
                          // Якщо значення не є масивом, рекурсивно викликаємо isNested для обробки вкладених об'єктів
                          result += isNested(obj[key]);
                      }
                  }
              }

              return result;
          }

          function logError(value, text) {
              console.log(`У нас проблемка, значення ${text} одного об'єкта = ${value}, але це не вплине на виконання коду`);
          }

          let nestedObj = {
              sales: [{name: 'John', salary: 1000}, {fname: 'Alice', salary: 600 }],
              development: {
                  web: [{name: 'Peter', salary: 2000}, {name: 'Alex', salary: 1800}],
                  internals: [{name: 'Jack', salary: 1300}],
              }
          };

          console.log(`Вам потрібно заплатити своїм співробітникам: ${isNested(nestedObj)}$`);
      </script>
</body>

</html>
